!function(window,document,$,undefined){"use strict";let numberOfboxes=document.querySelectorAll("[id=map10_img]").length;if(g_wp_postmap_path=g_wp_postmap_path.g_wp_postmap_path,1==numberOfboxes){let mobile=/iphone|ipod|android|webos|ipad|iemobile|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),touren=Object.values(php_touren),allIcons=php_allIcons,myIcon=new Array;allIcons.forEach((function(icon,iconindex){myIcon[iconindex]=L.icon({iconUrl:g_wp_postmap_path+icon[0],iconSize:[32,32],iconAnchor:[0,0],popupAnchor:[0,0]})}));var layer1=new L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'MapData:&copy; <a href="https://www.openstreetmap.org/copyright">OSM</a> contributors, <a href="https://viewfinderpanoramas.org">SRTM</a> | MapStyle:&copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}),layer2=new L.tileLayer("https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/ {y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),layer3=new L.tileLayer("https://tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),layer4=new L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{maxZoom:19,attribution:"Tiles &copy; Esri &mdash; Source: Esri User Community"});mobile&&(layer1.options.attribution=layer2.options.attribution,layer3.options.attribution=layer2.options.attribution,layer4.options.attribution=layer2.options.attribution);var mapOptions={center:[48,12],zoom:10,zoomControl:!1,layers:[layer1],tap:!1,gestureHandling:!0},baseMaps={OpenStreetMap:layer2,OpenTopoMap:layer1,"Bike-Hike-Map":layer3,Satellit:layer4},map=new L.map("map",mapOptions),scale,controlZoom;if(L.control.scale().addTo(map),!mobile)new L.Control.Zoom({position:"topleft"}).addTo(map);let LayerSupportGroup=L.markerClusterGroup.layerSupport();LayerSupportGroup.addTo(map);let group=new Array;allIcons.forEach((function(sIcon,index){group[index]=L.layerGroup()}));var marker=new Array,nposts=Array(allIcons.length).fill(0),j=0,icn,grp;touren.forEach(tour=>{let found=!1;for(let index=0;index<allIcons.length;index++)if(tour.category==allIcons[index][1]){icn=myIcon[index],grp=group[index],nposts[index]++,found=!0;break}found||(icn=myIcon[allIcons.length-1],grp=group[allIcons.length-1],nposts[allIcons.length-1]++),marker.push(new L.Marker(tour.coord,{title:tour.title,icon:icn})),marker[j].bindPopup('<a href="'+tour.link+'"><b>'+tour.title+'</b><br><img src="'+tour.img+'">'+tour.excerpt+"</a>"),marker[j].addTo(grp),j++}),group.forEach((function(sgrp,index){LayerSupportGroup.checkIn(group[index])}));let control=L.control.layers(baseMaps,null,{collapsed:!0});allIcons.forEach((function(icon,index){control.addOverlay(group[index],'<img class="layerIcon" src="'+g_wp_postmap_path+icon[0]+'"/> '+icon[2]+" ("+nposts[index]+")")})),control.addTo(map),group.forEach((function(sgrp,index){group[index].addTo(map)}));var bounds=L.latLngBounds();marker.forEach(m=>{let lat_lng=m._latlng;bounds.extend(lat_lng)}),map.fitBounds(bounds,{padding:[50,50]}),L.Control.Watermark=L.Control.extend({onAdd:function(map){var img=L.DomUtil.create("img");return img.src=g_wp_postmap_path+"lupe_p_32.png",img.style.background="white",img.style.width="32px",img.style.height="32px",img.style.cursor="pointer",img.title="Alles anzeigen",img.onclick=function(){map.fitBounds(bounds,{padding:[50,50]}),group.forEach((function(sgrp,index){map.removeLayer(group[index]),map.addLayer(group[index])}))},img},onRemove:function(){}}),L.control.watermark=function(opts){return new L.Control.Watermark(opts)},L.control.watermark({position:"topleft"}).addTo(map),LayerSupportGroup.on("clustermouseover",(function(a){var children=a.layer.getAllChildMarkers(),names=[],string="",max=children.length;max>10&&(max=10);for(let i=0;i<max;i++)names.push(children[i].options.title),string=string+"- "+children[i].options.title+"<br>";children.length>max&&(string+="...u.v.m...."),a.propagatedFrom.bindTooltip(string).openTooltip()})),LayerSupportGroup.on("clustermouseout",(function(a){a.propagatedFrom.bindTooltip("").closeTooltip()})),L.Control.Layers.include({getOverlays:function(){var control,layers,activemaplayer;return layers={},(control=this)._layers.forEach((function(obj){var layerName;obj.overlay||(layerName=obj.name,layers[layerName]=control._map.hasLayer(obj.layer),layers[layerName]&&(activemaplayer=layerName))})),activemaplayer}}),$(window).on("resize",(function(){var or=window.orientation,h=window.screen.availHeight,w=window.screen.availWidth;if(null==or){var divwidth,divhgt=.8*$(".box1").width();divhgt<400&&(divhgt=400),$("#map").height(divhgt)}else 0==or||180==or?$("#map").height(.75*w):$("#map").height(.5*h);map.invalidateSize()})).trigger("resize"),map.on("baselayerchange",(function(){var activeLayer;switch(control.getOverlays()){case"OpenStreetMap":$(".leaflet-container").css("background","#b9d3dc");break;case"OpenTopoMap":$(".leaflet-container").css("background","#97d2e3");break;case"Bike-Hike-Map":$(".leaflet-container").css("background","#c8e4fa");break;case"Satellit":$(".leaflet-container").css("background","#071e40");break;default:$(".leaflet-container").css("background","lightgrey")}})),$(window).on("load",(function(){var activeLayer=control.getOverlays(),or=window.orientation,h=window.screen.availHeight,w=window.screen.availWidth;if(null==or){var divwidth,divhgt=.8*$(".box1").width();divhgt<400&&(divhgt=400),$("#map").height(divhgt)}else 0==or||180==or?$("#map").height(.75*w):$("#map").height(.5*h);switch(map.fitBounds(bounds,{padding:[50,50]}),map.invalidateSize(),activeLayer){case"OpenStreetMap":$(".leaflet-container").css("background","#b9d3dc");break;case"OpenTopoMap":$(".leaflet-container").css("background","#97d2e3");break;case"Bike-Hike-Map":$(".leaflet-container").css("background","#c8e4fa");break;case"Satellit":$(".leaflet-container").css("background","#071e40");break;default:$(".leaflet-container").css("background","lightgrey")}}))}}(window,document,jQuery);
//# sourceMappingURL=wp_post_map_view_simple.min.js.map