/*! For license information please see pmtv_182.js.LICENSE.txt */
"use strict";(self.webpackChunkpost_map_table_view=self.webpackChunkpost_map_table_view||[]).push([[182],{182:(t,e,r)=>{r.r(e),r.d(e,{LeafletGpxJs:()=>ut}),r(274),r(759),r(942),r(860),r(407);var n=r(72),o=r.n(n),i=r(825),a=r.n(i),s=r(659),l=r.n(s),c=r(56),u=r.n(c),h=r(540),p=r.n(h),f=r(113),m=r.n(f),y=r(798),d={};function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w(n.key),n)}}function b(t,e,r){return(e=w(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t){var e=function(t){if("object"!=g(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:e+""}function k(t,e){return t.get(x(t,e))}function x(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}d.styleTagTransform=m(),d.setAttributes=u(),d.insert=l().bind(null,"head"),d.domAPI=a(),d.insertStyleElement=p(),o()(y.A,d),y.A&&y.A.locals&&y.A.locals,r(481),r(389),r(196),r(882);var S=new WeakMap,_=function(){function t(e,r){var n,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}(this,S,!1),b(this,"width",0),b(this,"pageVariables",[]),b(this,"storemarker",[]),b(this,"newmarker",[]),b(this,"mrk",[]),b(this,"phpmapheight",0),b(this,"maxZoomValue",19),b(this,"zpadding",[30,30]),b(this,"myIcon1",{}),b(this,"myIcon2",{}),b(this,"myIcon3",{}),b(this,"myIcon4",{}),b(this,"opts",{map:{center:[41.4583,12.7059],zoom:5,markerZoomAnimation:!1,zoomControl:!1},zoomControl:{position:"topleft"},layersControl:{options:{collapsed:!0}}}),b(this,"map",{}),b(this,"baseLayers",[]),b(this,"layer1",[]),b(this,"layer2",[]),b(this,"layer3",[]),b(this,"layer4",[]),b(this,"bounds",[]),b(this,"controlZoom",[]),b(this,"scale",[]),b(this,"controlLayer",[]),b(this,"group1",[]),b(this,"fullScreen",!1),b(this,"timeStamp",0),b(this,"tileserver",""),b(this,"useLocalTiles",!0),b(this,"useWebpTiles",!0),t.count++,this.number=e,this.elementOnPage=r,this.pageVariables=pageVarsForJs[e],n=S,o=/iphone|ipod|android|webos|ipad|iemobile|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),n.set(x(n,this),o),this.showLocateButton=!1,this.useLocalTiles="true"===this.pageVariables.useTileServer,this.useWebpTiles="true"===this.pageVariables.convertTilesToWebp,this.el=document.querySelector("#"+r),null===t.numberOfMaps&&(t.numberOfMaps=document.querySelectorAll("[id^=boxmap]").length),this.myIcon1=this.setIcon(this.pageVariables.imagepath,"photo.png","shadow.png"),this.myIcon2=this.setIcon(this.pageVariables.imagepath,"marker-icon.png","marker-shadow.png",[25,41]),this.myIcon3=this.setIcon(this.pageVariables.imagepath,"active.png","shadow.png"),this.myIcon4=this.setIcon(this.pageVariables.imagepath,"video2.png","shadow.png"),this.myIcon5=this.setIcon(this.pageVariables.imagepath,"video-active2.png","shadow.png"),null!==i&null!==a&&(this.opts.map.center=i,this.opts.map.zoom=a),this.getTileServerPath(),this.defMapLayers(),null===t.myLocale&&(t.myLocale=this.setLanguage()),this.map=new L.Map("map"+e,this.opts.map),this.showSelectedMap(),this.bounds=this.map.getBounds(),this.setMapControls(),this.setFullscreenButton()}return e=t,n=[{key:"setBounds",value:function(t){this.bounds=t}},{key:"getFeatureGroup",value:function(t){return new L.featureGroup(t)}},{key:"setIcon",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[32,32];return L.icon({iconUrl:t+e,iconSize:n,iconAnchor:[16,32],popupAnchor:[0,-16],shadowUrl:t+r,shadowSize:[48,32],shadowAnchor:[16,32]})}},{key:"getTileServerPath",value:function(){""===this.tileserver&&!0===this.useLocalTiles&&(this.tileserver=this.pageVariables.imagepath,this.tileserver=this.tileserver.replace("images/","leaflet_map_tiles/"),1===t.count&&(t.isHtaccessOK="true"===this.pageVariables.htaccessTileServerIsOK),t.isHtaccessOK||(this.tileserver=this.tileserver+"tileserver.php/?tile="))}},{key:"defMapLayers",value:function(){var t=["webp","webp","webp","webp"];this.useWebpTiles||(t=["png","png","png","jpeg"]);var e=['MapData &copy; <a href="https://www.openstreetmap.org/copyright">Proxy-OSM</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | MapStyle:&copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)','MapData &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors','MapData &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',"Tiles &copy; Esri &mdash; Source: Esri User Community"];this.useLocalTiles?(this.layer1=new L.tileLayer(this.tileserver+"otm/{z}/{x}/{y}."+t[0],{maxZoom:this.maxZoomValue,attribution:e[0]}),this.layer2=new L.tileLayer(this.tileserver+"osm/{z}/{x}/{y}."+t[1],{maxZoom:this.maxZoomValue,attribution:e[1]}),this.layer3=new L.tileLayer(this.tileserver+"cycle/{z}/{x}/{y}."+t[2],{maxZoom:this.maxZoomValue,attribution:e[2]}),this.layer4=new L.tileLayer(this.tileserver+"sat/{z}/{y}/{x}."+t[3],{maxZoom:this.maxZoomValue,attribution:e[3]})):(this.layer1=new L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:this.maxZoomValue,attribution:e[0]}),this.layer2=new L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:this.maxZoomValue,attribution:e[1]}),this.layer3=new L.tileLayer("https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",{maxZoom:this.maxZoomValue,attribution:e[2]}),this.layer4=new L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.jpeg",{maxZoom:this.maxZoomValue,attribution:e[3]})),k(S,this)&&(this.layer1.options.attribution=this.layer2.options.attribution,this.layer3.options.attribution=this.layer2.options.attribution,this.layer4.options.attribution=this.layer2.options.attribution),this.baseLayers={OpenStreetMap:this.layer2,OpenTopoMap:this.layer1,CycleOSM:this.layer3,Satellit:this.layer4}}},{key:"i18n",value:function(e){return"function"==typeof L.registerLocale?L._(e):null!==t.myLocale&&void 0!==t.myLocale[e]?t.myLocale[e]:e}},{key:"setLanguage",value:function(){var t={de:{"Show all":"Alles anzeigen",Distance:"Strecke",Ascent:"Anstieg",Descent:"Abstieg",Altitude:"Höhe",Images:"Fotos","Show fullscreen":"Zeige Vollbild","Exit fullscreen":"Vollbild beenden","y: ":"Höhe: ","x: ":"Strecke: ",All:"Alle",None:"Keine"},it:{"Show all":"Mostra Tutti",Distance:"Distanza",Ascent:"Salita",Descent:"Discesa",Altitude:"Altitudine",Images:"Foto","Show fullscreen":"Mappa a schermo intero","Exit fullscreen":"Esci schermo intero","y: ":"Altitudine: ","x: ":"Distanza: ",All:"Tutti",None:"Nessuno"},fr:{"Show all":"Afficher Tout",Distance:"Distance",Ascent:"Ascente",Descent:"Descente",Altitude:"Altitude",Images:"Images","Show fullscreen":"Afficher carte en plein écran","Exit fullscreen":"Quitter le mode plein écran","y: ":"Altitude: ","x: ":"Distance: ",All:"Tout",None:"Aucun"},es:{"Show all":"Mostrar Todo",Distance:"Distancia",Ascent:"Ascenso",Descent:"Descenso",Altitude:"Altura",Images:"Fotos","Show fullscreen":"Mostrar pantalla completa","Exit fullscreen":"Salir de pantalla completa","y: ":"Altura: ","x: ":"Distancia: ",All:"Todo",None:"Nada"}},e=navigator.language;return e=e.split("-")[0],L._&&L.i18n||(L._=L.i18n=this.i18n),"de"==e||"it"==e||"fr"==e||"es"==e?("function"==typeof L.registerLocale&&(L.registerLocale(e,t[e]),L.setLocale(e)),t[e]):null}},{key:"showSelectedMap",value:function(){"OpenStreetMap"===this.pageVariables.mapselector?this.map.addLayer(this.baseLayers.OpenStreetMap):"OpenTopoMap"===this.pageVariables.mapselector?this.map.addLayer(this.baseLayers.OpenTopoMap):"CycleOSM"===this.pageVariables.mapselector?this.map.addLayer(this.baseLayers.CycleOSM):"Satellit"===this.pageVariables.mapselector?this.map.addLayer(this.baseLayers.Satellit):this.map.addLayer(this.baseLayers.OpenStreetMap)}},{key:"setMapControls",value:function(){var t=this;k(S,this)||(this.controlZoom=new L.Control.Zoom(this.opts.zoomControl),this.controlZoom.addTo(this.map)),L.Control.Watermark=L.Control.extend({onAdd:function(){var e=L.DomUtil.create("img");return e.src=t.pageVariables.imagepath+"/lupe_p_32.png",e.style.background="white",e.style.width="32px",e.style.height="32px",e.style.cursor="pointer",e.title=t.i18n("Show all"),e.id="leaflet-home-"+t.number,e.onclick=function(){t.map.fitBounds(t.bounds)},e}}),L.control.watermark=function(t){return new L.Control.Watermark(t)},L.control.watermark({position:"topleft"}).addTo(this.map),this.scale=L.control.scale(),this.scale.addTo(this.map),this.controlLayer=L.control.layers(this.baseLayers,null,this.opts.layersControl.options),this.controlLayer.addTo(this.map)}},{key:"setFullscreenButton",value:function(){var t=this;r.e(137).then(r.t.bind(r,401,23)).then((function(){("undefined"==typeof MyLL?L:MyLL).control.fullscreen({position:"topleft",title:t.i18n("Show fullscreen"),titleCancel:t.i18n("Exit fullscreen"),content:null,forceSeparateButton:!0,forcePseudoFullscreen:!1,fullscreenElement:!1}).addTo(t.map)}))}},{key:"createSingleMarker",value:function(t){L.marker(this.opts.map.center,{title:t,icon:this.myIcon2}).addTo(this.map)}},{key:"createFotoramaMarkers",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.createMarkers(t),n=r.marker,o=r.j,i=r.testgroup;this.mrk=n,this.controlLayer.addOverlay(this.group1,this.i18n("Images")+" ("+o+")"),this.group1.addTo(this.map),e&&(this.bounds=this.setBoundsToMarkers(i))}},{key:"createMarkers",value:function(t){var e=this,r=this;this.group1=L.layerGroup();var n=L.featureGroup(),o=[],i=0;return t.forEach((function(t){if(null==t.coord[0]||null==t.coord[1]);else{var a;if(a="video"===t.mime?e.myIcon4:e.myIcon1,o.push(new L.Marker(t.coord,{title:t.title,icon:a,id:i,riseOnHover:!0})),"srcset"in t&&Object.keys(t.srcset).length){var s=Object.keys(t.srcset)[0];o[i].bindPopup("<div>"+t.title+'<br><img class="leaf_pup_img" src="'+t.srcset[s]+'"></div>',{maxWidth:"auto"})}else o[i].bindPopup(t.title);o[i].addTo(e.group1),o[i].on("click",(function(t){var e=parseInt(t.originalEvent.currentTarget.id.replace("map","")),n=new CustomEvent("mapmarkerclick",{detail:{name:"mapmarkerclick",marker:this.options.id,map:e}});r.el.dispatchEvent(n)})),o[i].on("mouseover",(function(t){this.openPopup()})),o[i].on("mouseout",(function(t){this.closePopup()})),o[i].addTo(n),i++}})),{marker:o,j:i,testgroup:n}}},{key:"unSetActiveMarker",value:function(){"function"==typeof this.storemarker.setIcon&&"function"==typeof this.storemarker.addTo&&(this.map.removeLayer(this.newmarker),void 0!==this.newmarker.options&&"video"===this.pageVariables.imgdata[this.newmarker.options.id].mime?this.storemarker.setIcon(this.myIcon4):this.storemarker.setIcon(this.myIcon1),this.newmarker.setZIndexOffset(-500),this.storemarker.addTo(this.map))}},{key:"setActiveMarker",value:function(t){void 0!==t&&(this.storemarker=this.mrk[t],this.newmarker=this.mrk[t],this.map.removeLayer(this.mrk[t]),"video"===this.pageVariables.imgdata[t].mime?this.newmarker.setIcon(this.myIcon5):this.newmarker.setIcon(this.myIcon3),this.newmarker.setZIndexOffset(500),this.newmarker.addTo(this.map))}},{key:"setBoundsToMarkers",value:function(t){var e,r=this.bounds;return 0!==(e=t instanceof L.LayerGroup?t.getBounds().pad(.1):r).length&&e instanceof L.LatLngBounds&&(this.map.fitBounds(e),this.map.getZoom()==this.maxZoomValue&&this.map.fitBounds(e,{maxZoom:this.maxZoomValue})),e}},{key:"mapFlyTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0];this.map.flyTo(t)}}],n&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}b(_,"count",0),b(_,"myLocale",null),b(_,"numberOfMaps",null),b(_,"isHtaccessOK",!1),r(555);var O=L.GPX.extend({coords:[],get_coords:function(){return this.coords.flat()}});function I(t,e){var r=function(t,e,r){t/=255,e/=255,r/=255;var n,o,i=Math.max(t,e,r),a=Math.min(t,e,r),s=(i+a)/2;if(i===a)n=o=0;else{var l=i-a;switch(o=s>.5?l/(2-i-a):l/(i+a),i){case t:n=(e-r)/l+(e<r?6:0);break;case e:n=(r-t)/l+2;break;case r:n=(t-e)/l+4}n/=6}return{h:360*n,s:o,l:s}}(parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16)),n=360/e,o=[];o.push(t);for(var i=1;i<e;i++){var a=j((r.h+i*n)%360,r.s,r.l);o.push(a)}return o}function j(t,e,r){if(t<0||t>360||e<0||e>1||r<0||r>1)return"#000000";var n,o,i,a=(1-Math.abs(2*r-1))*e,s=a*(1-Math.abs(t/60%2-1)),l=r-a/2;return 0<=t&&t<60?(n=a,o=s,i=0):60<=t&&t<120?(n=s,o=a,i=0):120<=t&&t<180?(n=0,o=a,i=s):180<=t&&t<240?(n=0,o=s,i=a):240<=t&&t<300?(n=s,o=0,i=a):(n=a,o=0,i=s),n=Math.round(255*(n+l)),o=Math.round(255*(o+l)),i=Math.round(255*(i+l)),"#".concat((1<<24|n<<16|o<<8|i).toString(16).slice(1).toUpperCase())}function E(t,e,r,n){var o=function(t){return t*(Math.PI/180)},i=o(r-t),a=o(n-e),s=o(t),l=o(r),c=Math.sin(i/2)*Math.sin(i/2)+Math.sin(a/2)*Math.sin(a/2)*Math.cos(s)*Math.cos(l);return 2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))*6371}function A(t,e,r,n){var o=function(t){return t*(Math.PI/180)},i=Math.sin((o(r)-o(t))/2),a=Math.sin((o(n)-o(e))/2),s=i*i+Math.cos(o(t))*Math.cos(o(r))*a*a;return 12742*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||V(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){if(t){if("string"==typeof t)return P(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function D(){D=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new E(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",y="completed",d={};function g(){}function v(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(A([])));x&&x!==r&&n.call(x,a)&&(w=x);var L=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,s){var l=h(t[o],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==C(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=p;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=O(s,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var c=h(e,r,n);if("normal"===c.type){if(o=n.done?y:f,c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(C(e)+" is not iterable")}return v.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},S(_.prototype),c(_.prototype,s,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(L),c(L,l,"Generator"),c(L,a,(function(){return this})),c(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function N(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G(n.key),n)}}function F(t,e,r){return(e=G(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function G(t){var e=function(t){if("object"!=C(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==C(e)?e:e+""}function Z(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}O.addInitHook((function(){var t=this,e=this.getLayers()[0]._leaflet_id,r=this._layers[e]._layers,n=0,o=0,i=0;this.coords=[],Object.entries(r).forEach((function(e){var r,a,s=(a=2,function(t){if(Array.isArray(t))return t}(r=e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(r,a)||function(t,e){if(t){if("string"==typeof t)return T(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(t,e):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=(s[0],s[1]);null!=l._latlngs&&(t.coords.push(l._latlngs),t.options.polyline_options[i]&&(o=n+l._latlngs.length-1,t.options.polyline_options[i].startIndex=n,n=o+1,t.options.polyline_options[i].stopIndex=o,t.options.polyline_options[i].dist=t._info.elevation._points[o][0]-t._info.elevation._points[t.options.polyline_options[i].startIndex][0],i++))}))}));var B=new WeakSet,W=function(){return t=function t(e,r,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#ff0000";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}(this,B),F(this,"coords",[]),F(this,"ascent",0),F(this,"descent",0),F(this,"tracklen",0),F(this,"trackurl",""),F(this,"options",{}),F(this,"tracks",[]),F(this,"gpxTracks",{}),F(this,"asyncLoading",!1),F(this,"number",-1),F(this,"eleSmoothing",4),F(this,"distSmoothing",5),F(this,"doTrackCalc",!0),F(this,"trackNumber",0),F(this,"trackName",""),F(this,"pageVariables",[]),F(this,"mapobject",{}),F(this,"trackColour",""),F(this,"bounds",null),F(this,"polyline_options",[]),this.number=e,this.pageVariables=pageVarsForJs[e],pageVarsForJs[e].tracks_polyline_options=[],this.distSmoothing=parseInt(this.pageVariables.sw_options.gpx_distsmooth),this.eleSmoothing=parseFloat(this.pageVariables.sw_options.gpx_elesmooth),this.mapobject=r,this.trackNumber=o,this.trackColour=i,this.trackurl=n["track_"+o.toString()].url,L.Icon.Default.prototype.options.iconUrl=this.pageVariables.imagepath+"marker-icon.png",L.Icon.Default.prototype.options.shadowUrl=this.pageVariables.imagepath+"marker-shadow.png",L.Icon.Default.prototype.options.iconRetinaUrl=this.pageVariables.imagepath+"marker-icon-2x.png",L.Icon.Default.prototype.options.iconSize=[18,24],L.Icon.Default.prototype.options.iconAnchor=[9,24],L.Icon.Default.prototype.options.popupAnchor=[0,-18],L.Icon.Default.prototype.options.shadowSize=[18,24],L.Icon.Default.prototype.options.shadowAnchor=[9,24],"geojson"===Z(B,this,U).call(this,this.trackurl)?(this.trackName=this.trackurl.properties.name,this.showGeoJson()):"xml"===Z(B,this,U).call(this,this.trackurl)?(Z(B,this,R).call(this),this.showTrack(this.polyline_options),pageVarsForJs[e].tracks_polyline_options=this.polyline_options):this.showTrack()},e=[{key:"showGeoJson",value:function(){var t=this,e=[],r=[],n=[];this.gpxTracks=new L.geoJSON(this.trackurl,{}),this.gpxTracks.setStyle({color:this.trackColour,stroke:parseInt(this.pageVariables.sw_options.trackwidth)}),n.push(this.gpxTracks);var o=0,i=0,a={};this.trackurl.features[0].geometry.coordinates.forEach((function(t){var n={lat:t[1],lng:t[0],meta:{time:null,ele:t[2],hr:null,cad:null,atemp:null,speed:0}};e.push(n),0==o&&(a=n),i+=E(a.lat,a.lng,n.lat,n.lng),a=n;var s=[i,t[2],i.toFixed(2)+" km, "+t[2].toFixed(0)+" m"];r.push(s),o+=1})),this.coords=e,this.elev_data=r,this.myIcon1=Z(B,this,H).call(this,this.pageVariables.imagepath,"pin-icon-start.png","pin-shadow.png"),this.myIcon2=Z(B,this,H).call(this,this.pageVariables.imagepath,"pin-icon-end.png","pin-shadow.png");var s=new L.marker(e[0],{icon:this.myIcon1});s.addTo(this.gpxTracks),n.push(s);var l=new L.marker(e[e.length-1],{icon:this.myIcon2});l.addTo(this.gpxTracks),n.push(l),this.gpxTracks.addTo(this.mapobject.map),this.gpxTracks._info={},this.gpxTracks._info.desc=this.trackurl.properties.description||"",this.setTrackInfo(),this.mapobject.controlLayer.addOverlay(this.gpxTracks,this.trackName),this.mapobject.bounds=this.gpxTracks.getBounds(),this.bounds=this.mapobject.bounds,this.gpxTracks.on("mouseover",(function(e){return Z(B,t,J).call(t,e)}))}},{key:"showTrack",value:(r=D().mark((function t(){var e,r,n,o=this,i=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null==(e=i.length>0&&void 0!==i[0]?i[0]:null)&&(e={color:this.trackColour,weight:parseInt(this.pageVariables.sw_options.trackwidth)}),r={async:this.asyncLoading,polyline_options:e,markers:{startIcon:this.pageVariables.imagepath+"/pin-icon-start.png",endIcon:this.pageVariables.imagepath+"/pin-icon-end.png"},marker_options:{iconSize:[16,22],iconAnchor:[8,22],shadowSize:[16,22],shadowAnchor:[8,22]}},this.gpxTracks=new O(this.trackurl,r),this.gpxTracks.addTo(this.mapobject.map),this.elev_data=this.gpxTracks.get_elevation_data(),this.coords=this.gpxTracks.get_coords(),n=0,this.gpxTracks.coords.forEach((function(t){o.polyline_options[n]=Object.assign(o.polyline_options[n],{info:o.calcGpxTrackInfo(t)}),n++})),this.trackName=this.gpxTracks._info.name,this.setTrackInfo(),this.mapobject.controlLayer.addOverlay(this.gpxTracks,this.gpxTracks._info.name),this.mapobject.bounds=this.gpxTracks.getBounds(),this.bounds=this.mapobject.bounds,this.gpxTracks.on("mouseover",(function(t){return Z(B,o,J).call(o,t)}));case 15:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){N(i,n,o,a,s,"next",t)}function s(t){N(i,n,o,a,s,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"setTrackInfo",value:function(){var t=this.gpxTracks._info.desc;"Dist:"==(t=t?t.split(" "):"")[0]&&t[1]&&t[4]&&t[7]?this.pageVariables.tracks["track_"+this.trackNumber.toString()].info=this.gpxTracks._info.desc:this.pageVariables.tracks["track_"+this.trackNumber.toString()].info=this.calcGpxTrackInfo()}},{key:"getIndexForCoords",value:function(t){for(var e=this.coords.length,r=1/0,n=-1,o=0;o<e;o++){var i=E(t.lat,t.lng,this.coords[o].lat,this.coords[o].lng);i<r&&(n=o,r=i)}return n}},{key:"calcGpxTrackInfo",value:function(){var t=this,e="",r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.coords;if(0==r.length)return"No Data found";var n=r[0].meta.ele,o=0,i=0,a=[r[0].lat,r[0].lng],s=0;if(this.doTrackCalc&&"array"==typeof r)r.forEach((function(e,r){var l=e.meta.ele;if(C("number"===l)){var c=l-n;Math.abs(c)>t.eleSmoothing&&(c>0&&(o+=c),c<0&&(i-=c),n=l);var u=[e.lat,e.lng],h=1e3*A(a[0],a[1],u[0],u[1]);Math.abs(h)>t.distSmoothing&&(s+=h,a=u)}})),this.tracklen=s.toString(),this.ascent=o.toString(),this.descent=i.toString(),e="Dist: "+s/1e3+" km, Gain: "+o+" Hm, Loss: "+i+" Hm";else if(this.doTrackCalc&&"object"===C(r)){for(var l=0,c=Object.entries(r);l<c.length;l++){var u=M(c[l],2),h=(u[0],u[1]),p=h.meta.ele;if(C("number"===p)){var f=p-n;Math.abs(f)>this.eleSmoothing&&(f>0&&(o+=f),f<0&&(i-=f),n=p);var m=[h.lat,h.lng],y=1e3*A(a[0],a[1],m[0],m[1]);Math.abs(y)>this.distSmoothing&&(s+=y,a=m)}}this.tracklen=s.toString(),this.ascent=o.toString(),this.descent=i.toString(),e="Dist: "+s/1e3+" km, Gain: "+o+" Hm, Loss: "+i+" Hm"}else e="Dist: "+(this.gpxTracks.get_distance()/1e3).toFixed(1)+" km, Gain: "+this.gpxTracks.get_elevation_gain().toFixed(1)+" Hm, Loss: "+this.gpxTracks.get_elevation_loss().toFixed(1)+" Hm";return e}}],e&&z(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function U(t){return"string"==typeof t&&t.startsWith("<")?"xml":"object"===C(t)?"geojson":"url"}function H(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return L.icon({iconUrl:t+e,iconRetinaUrl:t+n,iconSize:[16,22],iconAnchor:[8,22],shadowUrl:t+r,shadowSize:[16,22],shadowAnchor:[8,22]})}function J(t){if("mouseover"===t.type&&this.trackNumber==this.mapobject.currentTrack){var e=new CustomEvent("mouseoverpath",{detail:{name:"mouseoverpath",track:this.trackNumber,position:t.latlng,index:this.getIndexForCoords(t.latlng)}});t.layer._map._container.dispatchEvent(e)}else if("mouseover"===t.type&&this.trackNumber!=this.mapobject.currentTrack){var r=new CustomEvent("changetrack",{detail:{name:"changetrack",newtrack:this.trackNumber}});t.layer._map._container.dispatchEvent(r)}}function R(){var t,e=[],r=new Set,n=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=V(t))){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(a)throw o}}}}(this.trackurl.matchAll(/<type>(.*?)<\/type>/g));try{for(n.s();!(t=n.n()).done;){var o=t.value;e.push(o[1]),r.add(o[1])}}catch(t){n.e(t)}finally{n.f()}var i,a=r.size;if(0==a)return this.polyline_options[0]={color:this.trackColour,weight:parseInt(this.pageVariables.sw_options.trackwidth),type:"none"},0;for(var s=1,l=Object.assign.apply(Object,function(t){if(Array.isArray(t))return P(t)}(i=Array.from(r,(function(t){return F({},t,s++)})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||V(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=I(this.trackColour,a),u=0;u<e.length;u++){var h=l[e[u]];this.polyline_options.push({color:c[h-1],weight:parseInt(this.pageVariables.sw_options.trackwidth),type:e[u]})}return a-1}var q=r(519),K={};function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function $(){$=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new E(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",y="completed",d={};function g(){}function v(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(A([])));x&&x!==r&&n.call(x,a)&&(w=x);var L=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,s){var l=h(t[o],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Y(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=p;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=O(s,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var c=h(e,r,n);if("normal"===c.type){if(o=n.done?y:f,c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Y(e)+" is not iterable")}return v.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},S(_.prototype),c(_.prototype,s,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(L),c(L,l,"Generator"),c(L,a,(function(){return this})),c(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function Q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return X(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function tt(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function et(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){tt(i,n,o,a,s,"next",t)}function s(t){tt(i,n,o,a,s,"throw",t)}a(void 0)}))}}function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ct(n.key),n)}}function nt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nt=function(){return!!t})()}function ot(t,e,r,n){var o=it(at(1&n?t.prototype:t),e,r);return 2&n&&"function"==typeof o?function(t){return o.apply(r,t)}:o}function it(){return it="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=at(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},it.apply(null,arguments)}function at(t){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},at(t)}function st(t,e){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},st(t,e)}function lt(t,e,r){return(e=ct(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ct(t){var e=function(t){if("object"!=Y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Y(e)?e:e+""}K.styleTagTransform=m(),K.setAttributes=u(),K.insert=l().bind(null,"head"),K.domAPI=a(),K.insertStyleElement=p(),o()(q.A,K),q.A&&q.A.locals&&q.A.locals;var ut=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),lt(n=function(t,e,r){return e=at(e),function(t,e){if(e&&("object"==Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nt()?Reflect.construct(e,r||[],at(t).constructor):e.apply(t,r))}(this,e,[t,r,null,null]),"coords",[]),lt(n,"theMarker",{}),lt(n,"elev_data",[]),lt(n,"leafletTrackID",0),lt(n,"chart",{}),lt(n,"track",[]),lt(n,"trackStartColour","#ff0000"),lt(n,"trackColours",[]),lt(n,"allBounds",[]),lt(n,"currentTrack",0),lt(n,"preload",!0),null!==o&&(n.preload=o),n.pageVariables.ngpxfiles>0&&n.createTrackOnMap(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&st(t,e)}(e,t),r=e,n=[{key:"createTrackOnMap",value:(i=et($().mark((function t(){var r,n,o,i,a,s,l,c;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.number,this.trackStartColour=null!==(r=pageVarsForJs[n].sw_options.trackcolour)&&void 0!==r?r:"#ff0000",this.trackColours=I(this.trackStartColour,this.pageVariables.ngpxfiles),o=0,i=Object.entries(this.pageVariables.tracks);case 4:if(!(o<i.length)){t.next=14;break}return a=Q(i[o],2),s=a[0],a[1],l=parseInt(s.replace(/\D/g,"")),t.next=9,this.createTrack(n,l).then((function(t){return t}));case 9:this.track[l]=t.sent,null!==this.track[l].bounds&&this.track[l].bounds.isValid()?this.allBounds[l]=this.track[l].bounds:this.bounds&&(this.allBounds[l]=this.bounds);case 11:o++,t.next=4;break;case 14:null!==(c=this.findMaxBounds(this.allBounds))&&c.isValid()&&(ot(e,"setBounds",this,3)([c]),this.map.fitBounds(c)),this.map.currentTrack=this.currentTrack;case 18:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"createTrack",value:(o=et($().mark((function t(e,r){var n,o,i;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.preload){t.next=7;break}return n="track_".concat(r),o=this.pageVariables.tracks[n].url,t.next=5,fetch(o).then((function(t){return t.text()}));case 5:i=t.sent,this.pageVariables.tracks[n].url=i;case 7:return t.abrupt("return",new W(e,this,this.pageVariables.tracks,r,this.trackColours[r]));case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"findMaxBounds",value:function(t){if(null===t[0]||!Array.isArray(t)||0===t.length)return null;for(var e=t[0],r=1;r<t.length;r++){var n=t[r];e._southWest.lat=Math.min(e._southWest.lat,n._southWest.lat),e._southWest.lng=Math.min(e._southWest.lng,n._southWest.lng),e._northEast.lat=Math.max(e._northEast.lat,n._northEast.lat),e._northEast.lng=Math.max(e._northEast.lng,n._northEast.lng)}return e}}],n&&rt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,i}(_)},798:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(601),o=r.n(n),i=r(314),a=r.n(i)()(o());a.push([t.id,".leaflet-container {\n    background: #b9d3dc; /* OpenStreetMap */\n}\n.leaflet-container a {\n    color: black;\n    text-decoration: none;\n}\n\n.leaflet-popup-content-wrapper {\n\tpadding: 1px;\n\ttext-align: left;\n\tborder-radius: 5px !important; /* changed */\n}\n\n.leaflet-popup-content {\n\tmargin: 3px 3px 3px 3px !important; /* changed */\n    max-width: 250px;\n\tline-height: 1.3;\n\tfont-size: 13px;\n\tfont-size: 1.08333em;\n\tmin-height: 1px;\n}\n\n.leaflet-popup-content b {\n    font-weight: bold !important;\n}\n\n.leaflet-popup-content img {\n    margin-left: auto;\n    margin-right: auto;\n    margin-top: 0px;\n    width : 100px;\n    height: 100px;\n    float: right;\n}\n\n.leaflet-control-scale-line {\n    background: #f4f4f4;\n}\n\n.layerIcon {\n    width: 14px;\n    height: 14px;\n}\n\n.leaflet-tile {\n    border-radius: 0px !important;\n}\n\n.leaf_pup_img {\n    min-width: 100px !important;\n}\n",""]);const s=a},519:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(601),o=r.n(n),i=r(314),a=r.n(i)()(o());a.push([t.id,".leaflet-pane .div-icon-height {\n    margin-left: 0px !important;\n    margin-top: -50px !important;\n    z-index: 163;\n    outline: none;\n    color: white;\n    border-left: 2px solid red;\n    height: 50px !important;\n    z-index: 1000 !important;\n    width: unset;\n}\n\n.leaflet-pane .div-icon-height p {\n    margin: 0px;\n    width: max-content;\n    background: red;\n    padding-right: 5px;\n}\n\n.leaflet-overlay-pane svg {\n    pointer-events: auto !important;\n}",""]);const s=a}}]);